<%layout("layouts/boilerplate.ejs")%>

<body >

<div class="container my-5 bg-light min-vh-100 py-5">
<div class="card p-5 bg-white rounded-3 shadow">
<h1 class="text-3xl font-bold text-center mb-4">All Laws</h1>
<% if (laws && laws.length > 0) { %>
<div class="list-group">
<% laws.forEach(function(law) { %>
<div class="list-group-item list-group-item-action mb-3 rounded-3 shadow-sm transition-transform hover-scale-105 hover-bg-light">
<div class="d-flex w-100 justify-content-between align-items-center">
<div>
<h5 class="mb-1 text-primary"><%= law.title %></h5>
<p class="mb-1 text-secondary">Proposed By: <%= law.proposedBy %></p>
</div>
<div class="btn-group" role="group" aria-label="Law Actions">
<% if (currentUser && currentUser.isAdmin) { %>
<form action="/law/<%=law._id%>/delete?_method=DELETE" method="POST">
<button type="submit" class="btn btn-outline-danger">Delete</button>
</form>
<% } %>
<a href="/law/<%=law._id%>" class="btn btn-outline-primary">View</a>

</div>

</div>
<p class="mb-1"><span class="fw-bold">Main Field:</span> <%= law.mainField %></p>
<div class="d-flex align-items-center mt-2">
    <span class="fw-bold me-2">Status:</span>
    <% if (law.status === 'On-going') { %>
        <i class="fas fa-spinner text-info fa-spin me-1"></i>
        <span class="text-info">On-going</span>
    <% } else if (law.status === 'Closed') { %>
        <i class="fas fa-check-circle text-success me-1"></i>
        <span class="text-success">Closed</span>
    <% } else { %>
        <i class="fas fa-question-circle text-secondary me-1"></i>
        <span class="text-secondary">Unknown</span>
    <% } %>
</div>
</div>
<% }) %><a href="/" class="btn btn-secondary">Back</a>
</div>
<% } else { %>
<p class="text-secondary text-center">No laws available.</p>
<% } %>
</div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>